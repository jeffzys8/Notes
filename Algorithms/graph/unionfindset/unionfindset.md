# 并查集

## 原理

在算法中有时候会需要这样处理问题 —— 将所有的数据先单个组成一个子集，并且在算法运行过程中需要不断合并子集（两两不相交），同时经常需要查找两个元素是否属于同一个子集。

所需要的操作即：

- `same(x, y)` 判断两个数据是否在同一个子集
- `union(x, y)` 将两个数据所处的子集合并

如果直接划分数组空间（vector）来存，查询速度会很慢。可以考虑用树来优化，并定义如下操作

- `find(x)` 递归地找出该数据的根节点，`same`利用该函数即可
- `union(x, y)` 利用 `find`，将两个子树合并

## 优化方式1

**平衡树原理**，将 bigger rank 的子树root 作为合并后的root

## 优化方式2

**路径压缩**，`find`递归地经过树时，改变每一个节点的`parent`到根节点。得到的树将更加扁平，为以后直接或者间接引用节点的操作加速。