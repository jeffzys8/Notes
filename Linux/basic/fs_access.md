> 未完成，文件权限需要过一遍；其次是需要将目录配置标准的内容单独开一个md记录

# 目录文件权限

## 用户与群组

> 这里是对用户和群组的一个简单介绍；更详细的账号权限在后面学完以后单独开一个笔记来记


在Linux里面，任何一个文件都具有 `user`, `group`及`others`三种身份权限(当然还有可以可以执行任何操作的的`root`)

- `user` 对应文件的所有者
- `group` 对应该文件所支持的群组
- `others` 即除上面两个以外的用户

> 注意每个文件 **只支持一个Group**, 因为用户可以分配到多个 Group, 就已经能实现权限的任意组合了

- 用户 UID: root = 0, 系统用户 = [1, 999], 普通组 = [1000, 65535] (CentOS7)
- 组 GID: root = 0, 系统组 = [1, 999], 普通组 = [1000, 65535] (CentOS7)

相关存储文件: 
- `/etc/passwd` 存储 User 的信息
- `/etc/shadow` 存储 User 的密码
- `/etc/group` 存储 Group 的信息


## `ls -al`查看文件属性:

这个指令列出指定位置所有**文件+目录**的详细的权限与属性 (包含以`.`开头的隐藏文件/目录)

![](img/filer_ls.PNG)


1. 文件类型&权限(10个字符)：
    - 1：类型
      - `-` 普通文件，`file`命令可查看具体类型
      - `d` 目录 
      - `l` 软链接
      - `b`, `c` 分别是随机存储设备(硬盘) 和 字符设备(终端、键盘、鼠标)
      - `p` 命名管道
      - `s` 套接字
    - `r` `w` `x` 分别代表 read, write, execute
    - 2~4: `owner`所具有的权限
    - 5~7: 加入该`group`的用户所具有的权限
    - 8~10: `others`的权限
2. 连结数：该文件名对应连结的 i-node 实际连结的文件名数(之后会详细讲，这里理解为类似“引用计数”即可)
3. 拥有者
4. 所属群组
5. 文件大小 (byte为单位)
6. 最后修改日期
    - Linux不保存文件的创建时间
    - 太久了需要用 ```ls -l --full-time```
    - 乱码需转码 ```export LC_ALL=en_US.utf8``` (ubuntu似乎不太一样)
    > 另外如果要修改系统语言，需修改`/etc/locale.conf`的`LANG`参数
7. 文件名
    - `.` 开头为隐藏文件
    - `ls`指令的`-a`参数会显示隐藏文件

> 和Windows使用扩展名`.exe`来表示文件可执行不同, Linux是通过文件权限`x`来决定的

## 文件权限的更改
- `chgrp` 
- `chown`
    - 不仅可以改变owner, group也可以一并改
    - `chown user:group file`
- `chomod`: r(4) + w(2) +x(1)
    - `+ - =`
    - `u g o a`
    - 例子 `chmod u=rwx,g+x,o-x filename`

## 文件权限意义

- `r` - 可读取该文件内容
- `w` - 内容可以被修改 (但不代表文件本身能被删除、移动或重命名)
- `x` - 可被执行(类似Windows的exe)

## 目录权限意义

- `r` - 可以`ls`这个目录看有什么文件
- `w` - 可以操作这个目录结构，包括新建、删除、重命名、移动该目录下的文件或目录
- `x` - 可以进入这个目录并成为工作目录，可以`cd`进去或执行这个目录下的文件
  - 如果只有`r`没有`x`，虽然可以看到目录内文件名字，但其他信息是看不到的，也就更加无法`ls`目录内的子目录了。

**注意**：对于`w`权限的分配需要比较谨慎，下面是一个例子：<br>
假设有某个用户`testUser`, 则其工作目录为 `home/testUser`，而假设在这里面有一个重要的系统配置文件:
```
-rwx------ root root [a time] the_root.data
``` 
这个用户的确无法读、编辑、执行这个文件，**但它却可以删除和移动它**；这个过程就像有人把一个密封的文件放到你的保险柜里，虽然你拆不开这个文件，但你却可以销毁它。

> 这里打个岔：新建用户需要先`useradd`, 然后`passwd`，单纯使用前者无法登陆，原因暂时没有去查 (这段旧的笔记莫名其妙)

# 环境变量 $PATH

> 放到Bash特性章节去

- 不要将 `.` 放入 `$PATH` 中, 防止恶意用户在公共文档 (例如`/tmp`) 写恶意脚本。在某个目录下执行命令是需要加`./`前缀的，而如果`.`放入`$PATH`中，则不需要前缀，那么一些常用可执行文件可被篡改（比如`ls`）

- 每个用户具有自己的 $PATH, 暂时更改:
    ```sh
    $ PATH="$PATH:/usr/local/bin"
    ```
- 永久更改自己的PATH: 在 `~/.bashrc` 文件下
    ```sh
    export PATH="$PATH:/usr/local/bin"
    ```
    然后执行:
    ```sh
    $ source ~/.bashrc
    ```
- 更改系统级环境变量则修改 `/etc/profile`, 执行上述两个步骤