# Linux快速入门

## 资料

- [Linux命令大全(手册)](https://www.linuxcool.com/)

## Shell终端
Linux系统的内核负责完成对硬件资源的分配、调度等管理任务。Shell将用户的基于计算机的命令转述给内核执行。

- 6个预设终端，使用快捷键`[Ctrl] + [Alt] + [F1]~[F6]`切换
- ↑ ↓ 历史指令
- Tab补全
- 批处理脚本
- 环境变量
- 重定向
- ...

> 关于更多的内容会在后面的Bash特性讲到，这里简单带过

## 帮助

- 在只记得部分命令关键字的场合，我们可通过`man -k`来搜索；
- 需要知道某个命令的简要说明，可以使用 `whatis`；而更详细的介绍，则可用info命令；
- 查看命令在哪个位置，我们需要使用`which`；
- 而对于命令的具体参数及使用方法，我们需要用到强大的`man`；

> 看用法，用`man`；更细致的说明和介绍要用`info`

### `man`

使用`man`查看手册是非常重要的学习技能，

- `man # keyword` 可以指定对应的手册序号
- `man -f keyword` 浏览不同手册下的该条目信息
- `man -k keyword` 进行内容检索

序号	|代表内容|
--|--|
**1**	| **使用者在shell环境中可以执行的指令或可执行程序；比如`ls`**
2	| 系统核心可调用的函数与工具等
3	| 一些常用的函数(function)与函数库(library)，大部分为C的函数库(`libc`)；比如`printf`函数
4	| 设备的说明，通常在/dev下的档案
**5**	| **配置文件的格式；比如`/etc/passwd`**
6	| 游戏(games)
7	| 惯例与协定等，例如Linux文件系统、网络协议、ASCII code等等的说明
**8**	| **系统管理员可用的管理指令**
9	| 跟kernel有关的文件

比如```man fork```会显示fork(2)；在前期的学习 1, 5, 8 相对重要一些；到后面学APUE估计就经常要查 2, 3, 9 了

查阅文档时可以进行的一些操作：

按键|	进行工作|
--|--|
空白键|	向下翻一页|
[Page Down]	|向下翻一页|
[Page Up]	|向上翻一页|
[Home]	|去到第一页|
[End]	|去到最后一页|
/string	|向『下』搜寻string 这个字串|
?string	|向『上』搜寻string 这个字串|
n, N	|利用/ 或? 来搜寻字串时，可以用n 来继续下一个搜寻(不论是/ 或?) ，可以利用N 来进行『反向』搜寻|
q	|结束这次的man page|

### `info`

基本上，info与man的用途其实差不多，但info内容拆分成可跳转的节点，形成树状的结构。

- `U` 返回上层父节点（目录）
- `N` 下一个节点
- `P` 上一个节点
- `Enter` 进入超链接
- `h` 求助

## 目录命令

### `cd`
切换目录
- `cd -` = `cd ${OLDPWD}` 访问上一次所在目录

### `pwd`
查看当前目录
- 即 `echo ${PWD}`

### `ls`
展示文件夹文件
- `-R` 递归显示
- `-d` 仅查看目录自身（管道下好用）
- `-l` 长列表，详细信息
- `-h` 文件大小加单位

## 命令相关

### `which`
定位指令/别名的位置
- `--skip-alias` 可以跳过别名(??)

### `whereis`
定位一个命令的 bin, src, man
- `-b` 只看binary
- `-m` 只看manual
- `-s` 只看src

### `alias` 
查看别名列表
- 定义别名，`alias NAME=VALUE`，只对当前shell进程有效
- `unalias` 撤销别名

### `history`
查看历史命令
- 登出也会保存到文件中
- 可以通过设置环境变量定制history
  - `$HISTSIZE` 命令历史条数
  - `$HISTFILE`: 持久保存命令历史的文件位置
  - `$HISTFILESIZE`: 上述文件大小
  - `$HISTCONTROL`: 控制命令历史的记录方式 
    - `ignoredups`: 忽略重复的命令
    - `ignorespace`: 忽略空白字符开头的命令
    - `ignoreboth`: 两者同时生效
- `!#`: 再一次执行 history 中的命令 
- `!STRING`: 执行最近的以`STRING`开头的命令
- `ESC + '.'` 或 `ALT+ '.'`: 上一条命令的最后一个参数，等同于 `!$`

## 时间命令

### `date`
显示或设置**系统时钟**；系统时钟是开机获取完硬件时间后由CPU自己跳的时间
- 自定义显示格式: `date +"%Y-%m-%d-%H-%M-%S"`(更多的格式可以自行查帮助); 
- `%j` 可看是一年中的第几天
- 设定日期时间: `date [MMDDhhmm[[CC]YY][.ss]]`
- 另一个设置日期时间的方法: `date -s "20170901 8:30:00"`
- `--date 1 days ago`, `--date 1 days`

### `hwclock`
显示或设定**硬件时钟**；硬件时钟是BIOS供电维护的时间
- `-s --hctosys`: 硬件时间写入到系统时间
- `-w --systohc`: 系统时间写入到硬件时间

### `cal`
日历 `cal [[month] year]`

## 其他常用指令

### `file` 
查看文件类型

### `type`
查看命令类型，内置or外部可执行文件

### `cat`
输出文本文件内容
- `-n` 加行数

### `echo`
输出指定字符串
- `-e` 使转义符生效 (需要引号)
- "" 弱引用，替换 `$` 变量; 例如`echo "${PWD}"`
- '' 强引用，不替换 `$` 变量

### `shutdown`
关机 `shutdown [OPTIONS…] [hh:mm/+m] [wall msg]`
- `shutdown now` = `shutdown +0`
- `-r` = `reboot`
- `-p` = `poweroff`
- `-h` = `halt`
- `-c` 取消

### `wall`
向所有用户发出信息

### `sync`
将内存中暂存的信息写入硬盘，
- good practice: 定时和关机前`sync`一下

### `who`
查看当前登录用户的信息
- `-r` 运行级别？
- `w` 强化版 `who`，还显示运行状况

### `bc`

计算器、单位换算器(?)
- `+,-,*,/,^,%`
- `scale = #` 设置显示小数点，默认为0位